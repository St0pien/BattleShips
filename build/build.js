!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.r(t);var o="player1";function i(){j(o,Number(this.dataset.id))?O(o):("player1"==o?(o="player2",document.querySelector("h3").innerHTML="turn: PLAYER 2"):(o="player1",document.querySelector("h3").innerHTML="turn: PLAYER 1"),document.querySelectorAll(".map").forEach(function(e){return e.style.display="none"}),document.querySelector(".missInfo").style.display="block",document.querySelector(".button").style.display="")}function a(){document.querySelectorAll(".map").forEach(function(e){return e.style.display="grid"}),document.querySelector(".missInfo").style.display="none",document.querySelector(".button").style.display="none",M(o),O(o)}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(){document.querySelectorAll(".map").forEach(function(e){for(var t=document.createDocumentFragment(),r=0;r<100;r++){var n=document.createElement("div");n.classList.add("field"),n.dataset.id=r,t.appendChild(n)}e.appendChild(t)}),document.querySelectorAll(".field").forEach(function(e){e.addEventListener("dragenter",y),e.addEventListener("dragover",p),e.addEventListener("drop",h)});var e=document.querySelector(".button");e.removeEventListener("click",x),e.addEventListener("click",d)}var u,l="player1";function d(){this.classList.add("buttonClicked"),setTimeout(function(){return document.querySelector(".button").classList.remove("buttonClicked")},100);var e=document.querySelector(".ships"),t=document.querySelector("h2");if(t.innerHTML="Place your ships",t.style.color="",e.children.length<=0)if("player1"==l){l="player2",document.querySelector("h3").innerHTML="turn: PLAYER 2";var r=s(document.querySelectorAll(".ship"));r.sort(function(e,t){return Number(e.dataset.fields)-Number(t.dataset.fields)}),r.forEach(function(t){"vertical"==t.dataset.rotation&&g(t),e.appendChild(t)})}else{l="player1",document.querySelector(".button").removeEventListener("click",d),function(){document.querySelector("h3").innerHTML="turn: PLAYER 1",document.querySelectorAll(".map").forEach(function(e){e.style.display="grid"}),document.querySelector(".ships").style.display="none",document.querySelectorAll(".ship").forEach(function(e){e.style.display="none"});var e=document.querySelector(".button");e.style.display="none",e.innerHTML="NEXT TURN",e.addEventListener("click",a);var t=document.querySelectorAll("h2");t[0].innerHTML="Your ships",t[1].innerHTML="Your shots",n(document.querySelectorAll(".map")[1].children).splice(1).forEach(function(e){e.addEventListener("click",i)}),M(o),O(o)}()}else t.innerHTML="Place them ALL",t.style.color="#b00"}function f(){return l}function y(e){e.preventDefault()}function p(e){e.preventDefault()}function h(){var e=u,t=e.dataset.fields,r=[],n=this.dataset.id;if("vertical"==e.dataset.rotation){if(Number(n)+10*(Number(t)-1)>99)return void H(l,t,e);for(var o=0;o<Number(t);o++)r.push(Number(n)+10*o)}else for(var i=0;i<Number(t);i++){if(("9"==(Number(n)+i).toString().charAt(1)||Number(n)+i==9&&"0"==(Number(n)+i+1).toString().charAt(1))&&i+1!=Number(t))return void H(l,t,e);r.push(Number(n)+i)}w(l,t,r,e,this)}function m(){document.querySelectorAll(".ship").forEach(function(e,t){t<4?(e.style.width="40px",e.dataset.fields=1):t<7?(e.style.width="80px",e.dataset.fields=2):t<9?(e.style.width="120px",e.dataset.fields=3):(e.style.width="160px",e.dataset.fields=4),e.dataset.rotation="horizontal",e.addEventListener("dragstart",v),e.addEventListener("dragend",b),e.addEventListener("click",S)})}function v(){var e=this;setTimeout(function(){return e.style.display="none"}),u=this,T(this)}function b(){this.style.display="block"}function S(){g(this)}function g(e){if("horizontal"==e.dataset.rotation){var t=e.parentNode.dataset.id;if(Number(t)+10*(Number(e.dataset.fields)-1)>99)return}else for(var r=e.parentNode.dataset.id,n=e.dataset.fields,o=0;o<Number(n);o++)if(("9"==(Number(r)+o).toString().charAt(1)||Number(r)+o==9&&"0"==(Number(r)+o+1).toString().charAt(1))&&o+1!=Number(n))return;var i=!1;if(null!=e.parentNode.dataset.id&&(T(e),i=!0),i){var a=e.dataset.fields,s=[],c=e.parentNode.dataset.id;if("horizontal"==e.dataset.rotation)for(var u=0;u<a;u++){if(Number(c)+10*u>99)return;s.push(Number(c)+10*u)}else{if((Number(c)+Number(a)-1)%10==0&&"0"!=c.charAt(1)&&0!=c)return;for(var l=0;l<a;l++)s.push(Number(c)+l)}if(0==k(f(),s))return;w(f(),a,s,e,e.parentNode)}"vertical"==e.dataset.rotation?(e.dataset.rotation="horizontal",e.style.width="".concat(40*Number(e.dataset.fields),"px"),e.style.height="40px"):(e.dataset.rotation="vertical",e.style.height="".concat(40*Number(e.dataset.fields),"px"),e.style.width="40px")}var E=0;function A(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.d(t,"checkShip",function(){return k}),r.d(t,"placeShip",function(){return w}),r.d(t,"removeShip",function(){return T}),r.d(t,"restoreShip",function(){return H}),r.d(t,"drawShips",function(){return M}),r.d(t,"drawShots",function(){return O}),r.d(t,"addShot",function(){return j}),r.d(t,"restart",function(){return x});var N,L={player1:{ships:{fours:[],threes:[],twos:[],ones:[]},attacks:{hits:[],missHits:[],destroyed:[]}},player2:{ships:{fours:[],threes:[],twos:[],ones:[]},attacks:{hits:[],missHits:[],destroyed:[]}}};function q(e,t){switch(t){case"1":return e.ones;case"2":return e.twos;case"3":return e.threes;case"4":return e.fours}}function k(e,t){var r;"player1"==e?(r=L.player1,N=r):(r=L.player2,N=r);var n=r.ships;if(![n.fours,n.threes,n.twos,n.ones].every(function(e){return e.every(function(e){return e.fields.every(function(e){return t.every(function(t){var r=!0;return e==t&&(r=!1),e+1==t&&9!=e&&"9"!=e.toString().charAt(1)&&(r=!1),e-1==t&&0!=e&&"0"!=e.toString().charAt(1)&&(r=!1),e+10==t&&(r=!1),e-10==t&&(r=!1),e+11==t&&9!=e&&"9"!=e.toString().charAt(1)&&(r=!1),e+9==t&&0!=e&&"0"!=e.toString().charAt(1)&&(r=!1),e-9==t&&9!=e&&"9"!=e.toString().charAt(1)&&(r=!1),e-11==t&&0!=e&&"0"!=e.toString().charAt(1)&&(r=!1),r})})})}))return!1}function w(e,t,r,n,o){var i;"player1"==e?(i=L.player1,N=i):(i=L.player2,N=i);var a=i.ships;0!=k(e,r)&&(q(a,t).push({fields:r,hits:[]}),o.append(n))}function T(e){var t=e.parentNode.dataset.id,r=e.dataset.fields;if(null!=t){var n=q(N.ships,r);n.forEach(function(e,r){e.fields.indexOf(Number(t))>-1&&n.splice(r)})}}function H(e,t,r){if(null!=r.parentNode.dataset.id){var n=r.parentNode.dataset.id,o=Number(n),i=[];if("vertical"==r.dataset.rotation)for(var a=0;a<Number(t);a++)i.push(o+10*a);else for(var s=0;s<Number(t);s++)i.push(o+s);w(e,t,i,r,r.parentNode)}}function M(e){var t,r=[(t="player1"==e?L.player1.ships:L.player2.ships).ones,t.twos,t.threes,t.fours],n=document.querySelector(".map");A(n.children).splice(1).forEach(function(e){return e.style.backgroundColor=""}),r.forEach(function(e){e.forEach(function(e){e.fields.forEach(function(t){var r=n.querySelector('.field[data-id="'.concat(t.toString(),'"]'));e.hits.length==e.fields.length?r.style.backgroundColor="black":e.hits.indexOf(t)>-1?r.style.backgroundColor="red":r.style.backgroundColor="green"})})})}function O(e){if("player1"==e)var t=L.player1.attacks;else t=L.player2.attacks;var r=document.querySelectorAll(".map")[1];A(r.children).splice(1).forEach(function(e){e.style.backgroundColor="",e.addEventListener("click",i)});var n=t,o=n.hits,a=n.missHits,s=n.destroyed;o.forEach(function(e){var t=r.querySelector('.field[data-id="'.concat(e.toString(),'"]'));t.style.backgroundColor="red",t.removeEventListener("click",i)}),a.forEach(function(e){var t=r.querySelector('.field[data-id="'.concat(e.toString(),'"]'));t.style.backgroundColor="blue",t.removeEventListener("click",i)}),s.forEach(function(e){var t=r.querySelector('.field[data-id="'.concat(e.toString(),'"]'));t.style.backgroundColor="black",t.removeEventListener("click",i)})}function j(e,t){var r,n;"player1"==e?(r=L.player2.ships,n=L.player1.attacks):(r=L.player1.ships,n=L.player2.attacks);var o=[r.ones,r.twos,r.threes,r.fours],i=!1;return o.forEach(function(r){r.forEach(function(r){i||r.fields.indexOf(t)>-1&&(r.hits.push(t),n.hits.push(t),r.hits.length>=r.fields.length&&r.fields.forEach(function(t){n.destroyed.push(t),o.every(function(e){return e.every(function(e){return e.hits.length>=e.fields.length})})&&function(e){if("player1"==e)var t="PLAYER 1 WON!!!";else var t="PLAYER 2 WON!!!";document.querySelectorAll(".map").forEach(function(e){return e.style.display="none"});var r=document.querySelector(".missInfo");r.style.display="block",r.innerHTML=t;var n=document.querySelector(".button");n.style.display="",n.innerHTML="RESTART",n.removeEventListener("click",a),n.addEventListener("click",x)}(e)}),i=!0)})}),i||n.missHits.push(t),i}function x(){L={player1:{ships:{fours:[],threes:[],twos:[],ones:[]},attacks:{hits:[],missHits:[],destroyed:[]}},player2:{ships:{fours:[],threes:[],twos:[],ones:[]},attacks:{hits:[],missHits:[],destroyed:[]}}};var e=A(document.querySelectorAll(".map"));e[0].style.display="grid",e[1].style.display="none";var t=document.querySelector(".ships");t.style.display="",document.querySelectorAll(".ship").forEach(function(e){t.appendChild(e),"vertical"==e.dataset.rotation&&g(e),e.style.display="block"}),e.forEach(function(e){return A(e.children).forEach(function(e){return e.parentNode.removeChild(e)})}),e.forEach(function(e){var t=document.createElement("h2");t.innerHTML="Place your ships",e.append(t)});var r=document.querySelector(".button"),n=document.querySelector(".missInfo");n.style.display="none",n.innerHTML="YOU MISSED!",r.style.display="block",r.innerHTML="SET",console.log("restarted"),m(),c()}!function e(){(E+=2)>=360&&(E=0),document.querySelector(".backgroundScan").style.transform="rotate(".concat(E,"deg)"),window.requestAnimationFrame(e)}(),m(),c()}]);